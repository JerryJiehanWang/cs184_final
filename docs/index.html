<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
</head>
<style>
  body {
    padding: 100px;
    width: 1000px;
    margin: auto;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
</style>
<title>CS 184 Final Project</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>

<body>
  <h1 align="middle">CS 184 Final Report: Volumetric Scattering Rendering</h1>
<h2 align="middle">Team Member: Jiehan Wang, Jiayue Tao, Yun Xu</h2>

<h2 align="middle">Abstract</h2>
<p>Our project implemented Volumetric Path Tracing. Volumetric Path Tracing is a technique that can show the effect of
  fog when light travels through media in the air.Currently, in project 3, we implement a path tracer which only
  support lights falling on explicit surface. We extended the path tracer in project 3 so that the light not only interacts
  with primitives' surface, but also in the air.
</p>

<h2 align="middle">Tech Approach</h2>
  <h3>Pictures in this part?</h3>
<p> Based on the skeleton of project, we implement the light interacting with the media by Random Walk. In this part, we
  modify the estimate_global_illumination and at_least_one_bounce function to support our implementions.
  First, before the
light first interacts with a surface, we randomly sample a distance, \(s\), using the PDF \(p_{medium} = ke^{-ks}\). Then,
we compare \(s\) with the distance between camera and the first hit point of the ray \(d\). If \(s < d\), we perform a
integration based on this equation: \(L_s(y, \Theta) = \int_{\Omega}\frac{\delta}{k}f(y, \Theta, \Theta')L(y, \Theta')d\omega'\),
  where \(\delta\) is the scattering coefficient between 0 and 1, describing how much percent of light are being scattered and \(k\)
  is the extinction coefficient between 0 and 1, describing how much percent of light are fell out during one interacting with the media.
  Additionally, \(f(y, \Theta, \Theta')\) is the phase function, which is similar to the BSDF in normal path tracing, describing
  the distribution of the bouncing light. I will talk about phase function later.
  If \(s \ge d\), we perform a normal path tracing. Notice that for global illumination, this step only affects the first bounce,
  all other bounces are normal path tracing. In sum, our approach can be concluded by this equation \(L(x, \Theta) = \int_{0}^{\infty}
  [s < d ? L_s(x-s\Theta, \Theta) : L_o(x - d\Theta, \Theta)]ke^{-ks}ds\). Notice that whether we take the normal path tracing or not,
  we always times the \(ke^{-ks}\) term, and also because the probability of whether we interact with the media or not are determined
  by this equation \(ke^{-ks}\), when we do monte carlo integration, these two terms cancel with each other.
</p>
  <p>Sampling from the light is similar but different for interacting with the media in the air. Based on the original function
    estimate_direct_lighting_importance, we modify it so that it support interacting with the media. Instead of the normal
    importance over light, which times the BSDF of the surface, a cosine term and divided by the pdf, the volumetric version
  times the irradiance with Phase function, scattering coefficient and divided by the extinction coefficient and pdf.
  We also times a filter Spectrum to implement fogs of different color.</p>

  <h3>Pictures in this part?</h3>
  <p>Phase function is important in volumetric path tracing. We use phase function to sample the bouncing ray in global illumination.
  Na√Øvely, the simplest phase function is a uniform sphere sampling, where \(p(\Theta) = \frac{1}{4\pi}\). We also implement the
    Henyey-Greenstein phase function, which is \(p(\Theta) = \frac{1}{4\pi}\frac{1 - G^2}{(1 + G^2 - 2G\cos{\Theta})^{\frac{3}{2}}}\),
  where \(G\) is a constant between -1 and 1. If \(G = 0\), obviously it's a uniform sphere phase function. If \(G < 0\),
  higher probability that bouncing ray will towards the opposite direction of camera, and if \(G > 0\), higher probability that bouncing ray
  will towards the camera.</p>


  <h2 align="middle">Results</h2>
  <p>We expect that the most challenging part of the project is to reduce noise in the rendering and the computational cost. To reduce noise, we may implement the importance sampling method discussed in one of the articles listed below. We will measure the quality of our system mainly be observing visual correctness and noice levels.</p>


<h2 align="middle">Reference</h2>
<ul>
  <li>1. First week, modify the existing daes file or finding new dae files to support volumetric lighting for rendering.
  Getting familiar with project 3's path tracer's structure.</li>
  <li>2. Second week, implementing direct point lighting for isotropic absorbance and out-scattering when light travels
    through the media.
  </li>
  <li>3. Third week, implement global illumination, in-scattering and anisotropic scattering.</li>
  <li>3. Fourth week, experiment with parameters of different media, exploring more advanced volumetric lighting rendering,
  such as bi-direction path tracer, non-homogeneous scattering.</li>
</ul>

<h2 align="middle">Contributions</h2>

</body>
</html>